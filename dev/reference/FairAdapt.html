<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>fairadapt — fairadapt • Fair Data Adaptation</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="fairadapt — fairadapt" />
<meta property="og:description" content="Implementation of fair data adaptation with quantile preservation
(Plecko &amp;amp; Meinshausen 2019).
Uses only plain R." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Fair Data Adaptation</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/jss.pdf">fairadapt: Causal Reasoning for Fair Data Pre-processing (PDF)</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dplecko/fairadapt">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>fairadapt</h1>
    
    <div class="hidden name"><code>FairAdapt.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Implementation of fair data adaptation with quantile preservation
(Plecko &amp; Meinshausen 2019).
Uses only plain <code>R</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>fairadapt</span><span class='op'>(</span>
  <span class='va'>formula</span>,
  <span class='va'>train.data</span>,
  test.data <span class='op'>=</span> <span class='cn'>NULL</span>,
  adj.mat <span class='op'>=</span> <span class='cn'>NULL</span>,
  cfd.mat <span class='op'>=</span> <span class='cn'>NULL</span>,
  top.ord <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>protect.A</span>,
  res.vars <span class='op'>=</span> <span class='cn'>NULL</span>,
  quant.method <span class='op'>=</span> <span class='va'>rangerQuants</span>,
  visualize.graph <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>Object of class <code>formula</code> describing the response and
the covariates.</p></td>
    </tr>
    <tr>
      <th>train.data, test.data</th>
      <td><p>Training data &amp; testing data, both of class
<code>data.frame</code>. Test data is by default <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>adj.mat</th>
      <td><p>Matrix of class <code>matrix</code> encoding the relationships in
the causal graph. <code>M[i,j] == 1L</code> implies the existence of an edge from
node i to node j. Must include all the variables appearing in the formula
object.</p></td>
    </tr>
    <tr>
      <th>cfd.mat</th>
      <td><p>Symmetric matrix of class <code>matrix</code> encoding the
bidirected edges in the causal graph. <code>M[i,j] == M[j, i] == 1L</code>
implies the existence of a bidirected edge between nodes i and j. Must
include all the variables appearing in the formula object.</p></td>
    </tr>
    <tr>
      <th>top.ord</th>
      <td><p>A vector of class <code>character</code> describing the
topological ordering of the causal graph. Default value is <code>NULL</code>,
but this argument must be supplied if <code>adj.mat</code> is not specified.
Also must include all the variables appearing in the formula object.</p></td>
    </tr>
    <tr>
      <th>protect.A</th>
      <td><p>A value of class <code>character</code> describing the binary
protected attribute. Must be one of the entries of <code><a href='https://rdrr.io/r/base/colnames.html'>colnames(adj.mat)</a></code>.</p></td>
    </tr>
    <tr>
      <th>res.vars</th>
      <td><p>A vector of class <code>character</code> listing all the resolving
variables, which should not be changed by the adaption procedure. Default
value is <code>NULL</code>, corresponding to no resolving variables. Resolving
variables should be a subset of the descendants of the protected attribute.</p></td>
    </tr>
    <tr>
      <th>quant.method</th>
      <td><p>A vector of class <code>character</code> choosing the method
used for quantile regression. Possible values are "forest", "forest2",
"linear" and "nn".</p></td>
    </tr>
    <tr>
      <th>visualize.graph</th>
      <td><p>A <code>logical</code> indicating whether the causal graph
should be plotted upon calling the <code>fairadapt()</code> function. Default
value is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Forwarded to the function passed as `quant.method`.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>fairadapt</code>, containing the original and
adapted training and testing data, together with the causal graph and some
additional meta-information.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The procedure takes the training and testing data as an input, together with
the causal graph given by an adjacency matrix and the list of resolving
variables, which should be kept fixed during the adaptation procedure. The
procedure then calculates a fair representation of the data, after which
any classification method can be used. There are, however, several valid
training options yielding fair predictions, and the best of them can be
chosen with cross-validation. For more details we refer the user to the
original paper. Most of the running time is due to the quantile regression
step using the ranger package.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Plecko, D. &amp; Meinshausen, N. (2019).
Fair Data Adaptation with Quantile Preservation <br /></p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Drago Plecko</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>uni.adj.mat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/array.html'>array</a></span><span class='op'>(</span><span class='fl'>0</span>, dim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>, <span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>uni.adj.mat</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>uni.adj.mat</span><span class='op'>)</span> <span class='op'>&lt;-</span>
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"gender"</span>, <span class='st'>"edu"</span>, <span class='st'>"test"</span>, <span class='st'>"score"</span><span class='op'>)</span>

<span class='va'>uni.adj.mat</span><span class='op'>[</span><span class='st'>"gender"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"edu"</span>, <span class='st'>"test"</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span>
  <span class='va'>uni.adj.mat</span><span class='op'>[</span><span class='st'>"edu"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"test"</span>, <span class='st'>"score"</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span>
  <span class='va'>uni.adj.mat</span><span class='op'>[</span><span class='st'>"test"</span>, <span class='st'>"score"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fl'>1L</span>

<span class='va'>FA</span> <span class='op'>&lt;-</span> <span class='fu'>fairadapt</span><span class='op'>(</span><span class='va'>score</span> <span class='op'>~</span> <span class='va'>.</span>,
  train.data <span class='op'>=</span> <span class='va'>uni_admission</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span>, <span class='op'>]</span>,
  test.data <span class='op'>=</span> <span class='va'>uni_admission</span><span class='op'>[</span><span class='fl'>101</span><span class='op'>:</span><span class='fl'>150</span>, <span class='op'>]</span>,
  adj.mat <span class='op'>=</span> <span class='va'>uni.adj.mat</span>, protect.A <span class='op'>=</span> <span class='st'>"gender"</span><span class='op'>)</span>

<span class='va'>FA</span>
</div><div class='output co'>#&gt; Fairadapt result
#&gt; 
#&gt; Call:
#&gt;  score ~ . 
#&gt; 
#&gt; Protected attribute:                  gender 
#&gt; Protected attribute levels:           0, 1 
#&gt; Number of training samples:           100 
#&gt; Number of test samples:               50 
#&gt; Number of independent variables:      3 
#&gt; Total variation (before adaptation):  -0.573929 
#&gt; Total variation (after adaptation):   0.06771308 </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Drago Plecko.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


